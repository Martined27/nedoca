<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Nedoca - Una Cocina para toda la VIDA">
    <title>Nedoca - Una Cocina para toda la VIDA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Arial:wght@400;700&display=swap" rel="stylesheet">
    <!-- <link rel="icon" type="image/png" href="#">
    <link rel="apple-touch-icon" href="#"> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-image: url('/assets/optimized/Fondo.webp');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }

        @supports not (background-image: url('/assets/optimized/Fondo.webp')) {
            body {
                background-image: url('/assets/Fondo.png');
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .header {
            padding: 5px 0;
        }

        .logo {
            max-width: 400px;
            margin-bottom: 10px;
        }

        .promo-image {
            width: 100%;
            max-width: 800px;
            margin: 10px auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: block;
        }

        .promo-title {
            display: none;
            color: #0066a4;
            font-size: 28px;
            font-weight: bold;
            margin: 30px 0;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            line-height: 1.3;
        }

        .cta-container {
            margin: 40px 0;
            display: none;
        }

        .whatsapp-btn {
            display: inline-block;
            background: linear-gradient(145deg, #25D366, #128C7E);
            color: white;
            font-size: 14px;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3),
                        inset 0 1px 1px rgba(255, 255, 255, 0.2);
            margin: 10px auto;
            text-align: center;
            max-width: 250px;
            width: 100%;
            border: none;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .whatsapp-btn:hover {
            background: linear-gradient(145deg, #128C7E, #075E54);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4),
                        inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .whatsapp-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 10px rgba(37, 211, 102, 0.3),
                        inset 0 1px 1px rgba(255, 255, 255, 0.2);
        }

        .whatsapp-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            border-radius: 25px;
        }

        .form-hint {
            color: #666;
            font-size: 14px;
            margin: 5px auto 20px;
            text-align: center;
            max-width: 300px;
            line-height: 1.4;
        }

        .form-hint a {
            color: #0066a4;
            text-decoration: none;
            font-weight: 500;
        }

        .form-hint a:hover {
            text-decoration: underline;
        }

        .footer {
            margin-top: 40px;
            padding: 20px 0;
            color: #666;
            font-size: 14px;
        }

        .terms-link {
            color: #0066a4;
            text-decoration: underline;
            cursor: pointer;
        }

        .terms-link:hover {
            color: #004d7a;
        }

        .mobile-promo-image {
            display: none;
            width: 100%;
            max-width: 100%;
            margin: 10px auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            height: auto;
        }

        .registration-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 12px;
            margin: 30px auto;
            max-width: 800px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .registration-form h2 {
            color: #0066a4;
            margin-bottom: 35px;
            text-align: center;
            font-size: 36px;
            font-weight: 500;
            letter-spacing: 0.25px;
        }

        .input-label {
            display: block;
            margin-bottom: 10px;
            color: #212121;
            font-size: 18px;
            font-weight: 500;
            text-align: left;
            letter-spacing: 0.15px;
        }

        .input-label::after {
            content: " *";
            color: #f44336;
        }

        .input-label[for="cocinaImage"]::after {
            content: " (opcional)";
            color: #757575;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
            text-align: left;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            background-color: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #0066a4;
            box-shadow: 0 0 0 2px rgba(0, 102, 164, 0.2);
        }

        .form-group input::placeholder {
            color: #9e9e9e;
            font-size: 14px;
        }

        .form-group select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
            padding-right: 45px;
            cursor: pointer;
        }

        .file-label {
            display: block;
            margin-bottom: 10px;
            color: #212121;
            font-size: 18px;
            font-weight: 500;
            text-align: left;
            letter-spacing: 0.15px;
        }

        .file-label::after {
            content: " *";
            color: #f44336;
        }

        .file-label[for="cocinaImage"]::after {
            content: " (opcional)";
            color: #757575;
        }

        .form-group input[type="file"] {
            padding: 10px;
            background-color: #f5f5f5;
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-group input[type="file"]:hover {
            border-color: #0066a4;
            background-color: #f0f7ff;
        }

        .required-fields {
            color: #757575;
            font-size: 14px;
            margin: 20px 0;
            text-align: right;
        }

        .submit-btn {
            background-color: #0066a4;
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 6px rgba(0, 102, 164, 0.2);
        }

        .submit-btn:hover {
            background-color: #004d7a;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 102, 164, 0.3);
        }

        .submit-btn:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .social-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .social-btn {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .social-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }

        .instagram-btn {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
            color: white;
        }

        .instagram-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .facebook-btn {
            background-color: #1877F2;
            color: white;
        }

        .facebook-btn:hover {
            background-color: #166FE5;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 0;
            }

            .header {
                padding: 10px 0;
            }

            .registration-form {
                padding: 20px;
                margin: 20px auto;
            }

            .registration-form h2 {
                font-size: 24px;
            }

            .form-group input,
            .form-group select {
                padding: 12px;
                font-size: 15px;
            }

            .logo {
                max-width: 240px;
            }

            .promo-image {
                display: none;
            }

            .mobile-promo-image {
                display: block;
                width: 100%;
                max-width: 100%;
                margin: 0;
            }

            .whatsapp-btn {
                font-size: 16px;
                padding: 12px 25px;
                margin: 10px auto;
            }

            .social-buttons {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .social-btn {
                width: 80%;
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="header">
        </header>

        <main>
            <picture>
                <source media="(min-width: 769px)" srcset="/assets/optimized/center-nedoca-2.webp">
                <source media="(max-width: 768px)" srcset="/assets/optimized/nedoca_mobile.webp">
                <img src="/assets/optimized/center-nedoca-2.webp" alt="Nedoca - Una Cocina para toda la VIDA"
                    class="promo-image" loading="lazy" width="800" height="800">
            </picture>

            <img src="/assets/optimized/nedoca_mobile.webp" alt="Nedoca - Una Cocina para toda la VIDA"
                class="mobile-promo-image" loading="lazy">

            <a href="#registrationForm" class="whatsapp-btn">
                ¡Regístrate Aquí!
            </a>
            <p class="form-hint">O si prefieres, puedes <a href="#registrationForm">completar el formulario</a> que
                encontrarás más abajo</p>

            <form id="registrationForm" class="registration-form">
                <h2>Formulario de Registro</h2>
                <div class="form-group">
                    <label for="nombre" class="input-label">Nombre Completo</label>
                    <input type="text" id="nombre" name="nombre" required placeholder="Ingresa tu nombre completo">
                </div>
                <div class="form-group">
                    <label for="cedula" class="input-label">Cédula</label>
                    <input type="text" id="cedula" name="cedula" required
                        placeholder="Ingresa tu número de cédula (11 dígitos)">
                </div>
                <div class="form-group">
                    <label for="telefono" class="input-label">Teléfono</label>
                    <input type="tel" id="telefono" name="telefono" required
                        placeholder="Ingresa tu número de teléfono">
                </div>
                <div class="form-group">
                    <label for="comprobante" class="input-label">Número de Comprobante Fiscal</label>
                    <input type="text" id="comprobante" name="comprobante" required
                        placeholder="Ingresa el NCF ó e-NCF de tu factura">
                </div>
                <div class="form-group">
                    <label for="region" class="input-label">Región</label>
                    <select id="region" name="region" required>
                        <option value="">Selecciona tu región</option>
                        <option value="Norte">Norte</option>
                        <option value="Sur">Sur</option>
                        <option value="Este">Este</option>
                        <option value="Santo Domingo">Santo Domingo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="facturaImage" class="file-label">Imagen de la Factura</label>
                    <input type="file" id="facturaImage" name="facturaImage" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="cocinaImage" class="file-label">Imagen de tu Cocina</label>
                    <input type="file" id="cocinaImage" name="cocinaImage" accept="image/*">
                </div>
                <p class="required-fields">* Campos obligatorios</p>
                <button type="submit" class="submit-btn">Enviar y Participar</button>
            </form>

            <div class="social-buttons">
                <a href="https://www.instagram.com/nedocarepdom" target="_blank" class="social-btn instagram-btn">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
                    </svg>
                    Nedoca
                </a>
                <a href="https://www.facebook.com/Nedoca-100085374285877/" target="_blank"
                    class="social-btn facebook-btn">
                    <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" />
                    </svg>
                    Nedoca
                </a>
            </div>

            <div class="cta-container">
            </div>
        </main>

        <footer class="footer">
            <p>© 2025 Nedoca. Todos los derechos reservados. </p>
            <p>La promocion es valida hasta el 31 de mayo de 2025</p>
            <p><a href="https://docs.google.com/document/d/1HT1shsOS-kXG6vocjAyGMmavneGU1ROA/edit?usp=drivesdk&ouid=104655815686240727964&rtpof=true&sd=true"
                    class="terms-link" target="_blank" rel="noopener noreferrer">Ver términos y condiciones</a></p>
        </footer>
    </div>
    <script>
        // Luhn algorithm for cédula validation
        function validateCedula(cedula) {
            // Remove any non-digit characters
            cedula = cedula.replace(/\D/g, '');

            // Check if it's 11 digits
            if (cedula.length !== 11) return false;

            // Check if it's all the same digit
            if (/^(\d)\1{10}$/.test(cedula)) return false;

            // Luhn algorithm
            let sum = 0;
            for (let i = 0; i < 10; i++) {
                let digit = parseInt(cedula[i]);
                if (i % 2 === 1) {
                    digit *= 2;
                    if (digit > 9) digit -= 9;
                }
                sum += digit;
            }

            const checkDigit = (10 - (sum % 10)) % 10;
            return checkDigit === parseInt(cedula[10]);
        }

        // Phone number validation
        function validatePhone(phone) {
            // Remove any non-digit characters
            phone = phone.replace(/\D/g, '');
            // Check if it's between 10 and 15 digits
            return phone.length >= 10 && phone.length <= 15;
        }

        // Image validation
        function validateImage(file) {
            const validTypes = [
                'image/jpeg',
                'image/jpg',
                'image/png',
                'image/heic',
                'image/heif',
                'image/webp'
            ];
            return validTypes.includes(file.type);
        }

        document.getElementById('registrationForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const submitBtn = this.querySelector('.submit-btn');
            const cedula = formData.get('cedula');
            const telefono = formData.get('telefono');
            const facturaImage = formData.get('facturaImage');
            const cocinaImage = formData.get('cocinaImage');

            // Validate cédula
            if (!validateCedula(cedula)) {
                alert('Por favor, ingrese una cédula válida.');
                return;
            }

            // Validate phone
            if (!validatePhone(telefono)) {
                alert('Por favor, ingrese un número de teléfono válido (10-15 dígitos).');
                return;
            }

            // Validate factura image
            if (facturaImage.size > 0 && !validateImage(facturaImage)) {
                alert('Por favor, seleccione una imagen válida para la factura (JPG, PNG, HEIC, HEIF, WEBP).');
                return;
            }

            // Validate cocina image if provided
            if (cocinaImage.size > 0 && !validateImage(cocinaImage)) {
                alert('Por favor, seleccione una imagen válida para la cocina (JPG, PNG, HEIC, HEIF, WEBP).');
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';

            try {
                // Convert the form data to a JSON object
                const formObject = {};
                const filePromises = [];

                formData.forEach((value, key) => {
                    if (key === 'facturaImage' || key === 'cocinaImage') {
                        // Handle file uploads
                        if (value.size > 0) { // Only process if a file was selected
                            const file = value;
                            const reader = new FileReader();
                            const promise = new Promise((resolve) => {
                                reader.onload = function (e) {
                                    formObject[key] = e.target.result;
                                    resolve();
                                };
                                reader.readAsDataURL(file);
                            });
                            filePromises.push(promise);
                        }
                    } else {
                        formObject[key] = value;
                    }
                });

                // Wait for all file uploads to complete
                await Promise.all(filePromises);
                await submitToGoogleSheets(formObject);
            } catch (error) {
                console.error('Error:', error);
                alert('Hubo un error al enviar el formulario. Por favor, intente nuevamente.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Enviar y Participar';
            }
        });

        // Add input validation for phone number
        document.getElementById('telefono').addEventListener('input', function (e) {
            // Remove any non-digit characters
            this.value = this.value.replace(/\D/g, '');
        });

        async function submitToGoogleSheets(data) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwVgfZN20fFxfTJmo5w0XEL7u7sfj_pZa5MBMhanNagj7vBJw3at7HL7alGEfwWCxuK2Q/exec'
            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    body: JSON.stringify(data),
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    mode: 'no-cors'
                });

                alert('¡Registro exitoso! Gracias por participar.');
                document.getElementById('registrationForm').reset();
            } catch (error) {
                console.error('Error:', error);
                alert('Hubo un error al enviar el formulario. Por favor, intente nuevamente.');
            }
        }
    </script>
</body>

</html>